- name: check latest release
  uri:
    url: https://api.github.com/repos/containerd/nerdctl/releases/latest
    return_content: true
  no_log: true
  register: json_response
- name: get download url
  ansible.builtin.debug:
    var: item
  loop: "{{ json_response.json | community.general.json_query(release_query) }}"
  register: release_url
  vars:
    release_query: "assets[?contains(name,'linux-amd64')&&contains(name,'full')].browser_download_url"
- get_url:
    url: "{{ release_url }}"
    dest: "/tmp/foo"
